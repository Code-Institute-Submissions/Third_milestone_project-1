{% extends 'base.html' %} {% block content %}


    <div class="row">
        <div class="col-lg-3">
            <h4 class="my-4">Books selection</h4>
            <div class="list-group"> 
                {% for name in names %}               
                <a href="{{url_for('get_tasks')}}" class="list-group-item active">{{name.name}}</a>
                {% endfor %}
            </div>
        </div>
        


                    <div class="card card-outline-secondary my-4">
                <div class="card-header">Product Reviews</div>
                <div class="card-margin card-body">
                    {% for review in reviews %}
                        {% if review.name == book.name %}
                            <p>{{review.review_1}}</p>
                            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
                            <hr>
                            <p>{{review.review_2}}</p>
                            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
                            <hr>
                            <p>{{review.review_3}}</p>
                            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
                            <hr>
                            <p>{{review.review_4}}</p>
                            <small class="text-muted">Posted by Anonymous on 3/1/17</small>
                            <hr>
                            <a href="#" class="btn btn-success">Leave a Review</a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>


        <div class="col-lg-3">
            <h4 class="my-4">Books selection</h4>
            <div class="list-group"> 
                {% for name in names %}               
                <a href="{{url_for('get_tasks')}}" class="list-group-item active">{{name.name}}</a>
                {% endfor %}
            </div>
        </div>
{% endblock %}

        <div class="card card-outline-secondary my-4">
            <div class="card-header">Product Reviews</div>
            <div class="card-margin card-body">
                {% for key1,item1 in reviews.items() %}
                    {% if loop.index > 2 %}
                        <p>{{ item1 }}</p>
                        <small class="text-muted">Posted by on </small>
                        <hr>
                    {% endif %}
                {% endfor %}
                <a href="#" class="btn btn-success">Leave a Review</a>
 
            </div>
        </div>

@app.route("/done")    
def done ():    
    #Done-or-not ICON    
    id=request.values.get("_id")    
    task=todos.find({"_id":ObjectId(id)})    
    if(task[0]["done"]=="yes"):    
        todos.update({"_id":ObjectId(id)}, {"$set": {"done":"no"}})    
    else:    
        todos.update({"_id":ObjectId(id)}, {"$set": {"done":"yes"}})    
    redir=redirect_url()        
    
    return redirect(redir)    
  
@app.route("/action", methods=['POST'])    
def action ():    
    #Adding a Task    
    name=request.values.get("name")    
    desc=request.values.get("desc")    
    date=request.values.get("date")    
    pr=request.values.get("pr")    
    todos.insert({ "name":name, "desc":desc, "date":date, "pr":pr, "done":"no"})    
    return redirect("/list")  


db.reviews_book.insertOne( { x: 1 } )

db.reviews_book.insertOne( {"name": "The Social Animal","review_1": "I read this for a Social Psychology class I took, in college. Honestly, this is the kind of book kids should be reading in middle or high school. Instead of To Kill a Mockingbird or To Kill a Mockingbird. It was interesting but not as advanced as I would've liked. Nevertheless, you probably have to read it for your college class and you're just wasting time reading the reviews even though you're going to have to read it whether you want to or not to get the credit, to get your degree.","review_2": "I enjoy a bit of sociology and as a mid level manager hope that my reading in leadership and management has helped me be a better manager. However, this collection and style of writing is the best I have yet read. It covers all the studies I have been exposed to in other readings and yet peppered in is the author thoughts and examples from current events. I enjoyed the mix. I better understand myself and groups from this material and hopefully can be provide more positive interactions to others. Thank you for the book and the many revisions.","review_3": "I read this book in fall 2014 for my social psych class, and i loved it. it's not a textbook, it's written like any other reading book that one *doesn't* purchase for school. it's easy to read, entertaining, straightforward. you don't have to be a psych major to understand or enjoy it [im not, i took it for general ed]. i bought it voluntarily in fall 2016, because i liked the book that much.", "review_4": "This book was heavily marked with different colors, some were dark and made it very hard to read. It looks like a few people have marked all but a few chapters. I was enrolled for a class in June and I dropped it and started it last week so I hadn't looked at the book until last week. So now it is too late to return it. I will have to buy another one very inconvenient and frustrating, certainly not worth saving a few bucks. This book is useless to me."} )


    <form>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="inputEmail4">Full name</label>
                <input type="text" class="form-control" name="name" id="name" placeholder="full name">
            </div>
        </div>
        <div class="form-group">
            <label for="inputAddress">Review</label>
            <input type="text" class="form-control" id="review" name="review" placeholder="write your review">
        </div>
        <div class="form-group">
            <label for="date">Date</label>
            <input type="text" class="form-control" id="date" name="date" placeholder="Date">
        </div>
    </form>



            <form action="{{ url_for('insert_review', review_id=review._id, book_id=book._id, book_name=book.name) }}" method="POST" class="col s12">
                <div class="form-row">
                    <div class="input-field col s12">
                        <label for="full name">Full name</label>
                        <input id="name" name="name" type="text" placeholder="full name" class="form-control">
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-field col s12">
                        <textarea id="textarea1" name="review" class="materialize-textarea"></textarea>
                        <label for="disabled">review</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12">
                        <input id="password" type="text" name="date" class="datepicker validate">
                        <label for="date">date</label>
                    </div>
                </div>

                <div class="row">
                    <button class="btn waves-effect waves-light" type="submit" name="action">Add review
                    <i class="material-icons right">playlist_add</i>
                    </button>
                </div>
            </form>


            var form1 = document.getElementById("#editeupdate");
        document.getElementById("#Add").addEventListener("click", function () {
            form1.submit().action = "/insert_book";
        });
        var form2 = document.getElementById("#editeupdate");
        document.getElementById("#Edit").addEventListener("click", function () {
            form2.submit().action = "/update_book";
        });
        function myFunction() {
        document.getElementById("#editeupdate");
        document.getElementById("#editeupdate").action = "/update_book";
        }